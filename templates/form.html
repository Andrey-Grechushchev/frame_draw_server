<!--
HTML-—Ñ–æ—Ä–º–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF-—á–µ—Ä—Ç–µ–∂–∞ –ø–æ –¥–∞–Ω–Ω—ã–º, –≤–≤–µ–¥—ë–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- –†–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏:
  1. –û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–¥–ø–∏—Å—å ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Ä–∞–º–∫–∏ —á–µ—Ä—Ç–µ–∂–∞ (–§–ò–û —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ –ø—Ä.).
  2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞—Ä–∫–∞—Å–∞ –∏ –∏–∑–¥–µ–ª–∏—è.
  3. –°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Äî –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã.
  4. –ò–º—è —Ñ–∞–π–ª–∞ ‚Äî –∏–º—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è PDF-—Ñ–∞–π–ª–∞.

UI/UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –ö–∞–∂–¥—ã–π –±–ª–æ–∫ –æ–±—ë—Ä–Ω—É—Ç –≤ <fieldset> —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º <legend>.
- –ö –∫–∞–∂–¥–æ–º—É –∑–∞–≥–æ–ª–æ–≤–∫—É –¥–æ–±–∞–≤–ª–µ–Ω –∑–Ω–∞—á–æ–∫ üí¨ —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π (—á–µ—Ä–µ–∑ –∞—Ç—Ä–∏–±—É—Ç title).
- –í –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –±–ª–æ–∫ <details>, —Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ —Ä–∞–±–æ—Ç–µ —Å —Ñ–æ—Ä–º–æ–π.
- –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä—Ç—ë–∂" –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä Flask.

–§—É–Ω–∫—Ü–∏—è JavaScript:
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã (`submit`).
- –ü—Ä–µ—Ä—ã–≤–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã (`e.preventDefault()`).
- –°–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é FormData.
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∏–º—è —Ñ–∞–π–ª–∞ –∏–∑ –ø–æ–ª—è `filename`.
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å `POST` –Ω–∞ /generate:
  - –í–∫–ª—é—á–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ Authorization (Bearer token).
  - –í —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–µ—Ä–µ–¥–∞—ë—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã.

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç —É—Å–ø–µ—à–Ω–æ (`response.ok`):
  - –ü–æ–ª—É—á–µ–Ω–Ω—ã–π PDF-—Ñ–∞–π–ª —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
  - –ò–º—è —Ñ–∞–π–ª–∞ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è (—É–¥–∞–ª—è—é—Ç—Å—è –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Å–∏–º–≤–æ–ª—ã).
- –ü—Ä–∏ –æ—à–∏–±–∫–µ:
  - –í—ã–≤–æ–¥–∏—Ç—Å—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ `alert()` —Å —Ç–µ–∫—Å—Ç–æ–º –æ—à–∏–±–∫–∏.

–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Bearer-—Ç–æ–∫–µ–Ω.
- –§–æ—Ä–º—É –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞–∑–º–µ—â–∞—Ç—å –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ö–æ—Å—Ç–µ (–≤–∫–ª—é—á—ë–Ω CORS –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ).

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –∏ –±—ã—Å—Ç—Ä–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ CMS –∏–ª–∏ SPA —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π.
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç AJAX-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ ‚Äî —Ç–æ–ª—å–∫–æ —á–∏—Å—Ç—ã–π JavaScript.

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- –ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (–∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π HTML5 required).
- –ù–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ª–æ–≥–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∫—Ä—ã—Ç–∏–µ –ø–æ–ª–µ–π, –ø–µ—Ä–µ—Å—á—ë—Ç—ã).

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
- URL /generate –¥–æ–ª–∂–µ–Ω –≤–µ—Å—Ç–∏ –Ω–∞ –±–æ–µ–≤–æ–π –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é JavaScript).
- –ü–æ–¥—É–º–∞—Ç—å –æ–± –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø.
-->

<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–§–æ—Ä–º–∞ –≤–≤–æ–¥–∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: sans-serif; background: #f5f5f5; padding: 20px; }
    form { background: #fff; padding: 20px; border-radius: 8px; max-width: 700px; margin: auto; }
    fieldset { margin-bottom: 20px; border: 1px solid #ccc; border-radius: 8px; padding: 15px; }
    legend { font-weight: bold; }
    label { display: block; margin: 10px 0 5px; }
    input, select { width: 100%; padding: 5px; box-sizing: border-box; }
    .checkbox-label { display: flex; align-items: center; gap: 10px; margin-top: 8px; }
    .inline-group { display: flex; align-items: center; gap: 12px; margin-top: 8px; }
    .inline-group label { margin: 0; }
    button { padding: 10px 20px; font-size: 16px; }
    .disabled-like { opacity: 0.6; }
  </style>
</head>
<body>

  <details style="max-width: 700px; margin: auto; background: #fff; padding: 15px; border-radius: 8px; border: 1px solid #ccc; margin-bottom: 20px;">
    <summary style="font-size: 18px; font-weight: bold; cursor: pointer;">‚ÑπÔ∏è –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ–æ—Ä–º–æ–π</summary>
    <div style="margin-top: 10px;">
      <p>1. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ —Ä–∞–∑–¥–µ–ª–∞—Ö:</p>
      <ul>
        <li><strong>–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–¥–ø–∏—Å—å</strong> ‚Äî –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤—â–∏–∫–µ –∏ —É—Ç–≤–µ—Ä–∂–¥–∞—é—â–µ–º.</li>
        <li><strong>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ</strong> ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞—Ä–∫–∞—Å–∞ –∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.</li>
        <li><strong>–°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</strong> ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã.</li>
        <li><strong>–ò–º—è —Ñ–∞–π–ª–∞</strong> ‚Äî –∫–∞–∫ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª.</li>
      </ul>
      <p>2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É <strong>¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä—Ç—ë–∂¬ª</strong>.</p>
      <p>3. –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç—Å—è PDF-—Ñ–∞–π–ª —Å —á–µ—Ä—Ç–µ–∂–æ–º.</p>
      <p>üîê –î–æ—Å—Ç—É–ø –∑–∞—â–∏—â—ë–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –ï—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç –∏–ª–∏ –æ–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π, –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –æ—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞.</p>
      <p>üìÑ –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤–∞–º –∫–∞–∫ –∑–∞–≥—Ä—É–∑–∫–∞. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π.</p>
    </div>
  </details>


  <form id="pdfForm" method="post">
    <!-- –û–°–ù–û–í–ù–ê–Ø –ù–ê–î–ü–ò–°–¨ -->
    <fieldset>
      <legend>–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–¥–ø–∏—Å—å
        <span class="info-icon" title="–î–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –Ω–∞–¥–ø–∏—Å–∏ –Ω–∞ —á–µ—Ä—Ç–µ–∂–µ. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–º–∏–ª–∏–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.">üí¨</span>
      </legend>

      <label>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ:</label>
      <input type="text" name="component_identification" value="–ö–∞—Ä–∫–∞—Å" required>

      <label>–†–∞–∑—Ä–∞–±–æ—Ç–∞–ª:</label>
      <input type="text" name="designer" value="">

      <label>–ü—Ä–æ–≤–µ—Ä–∏–ª:</label>
      <input type="text" name="scrutineer" value="">

      <label>–¢–µ—Ö. –∫–æ–Ω—Ç—Ä:</label>
      <input type="text" name="supervisor" value="">

      <label>–ù–æ—Ä–º. –∫–æ–Ω—Ç—Ä:</label>
      <input type="text" name="document_controller" value="">

      <label>–£—Ç–≤–µ—Ä–¥–∏–ª:</label>
      <input type="text" name="confirmer" value="">
    </fieldset>

    <!-- –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ê–ù–ù–´–ï -->
    <fieldset>
      <legend>–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
        <span class="info-icon" title="–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞—Ä–∫–∞—Å–∞. –≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –≤–ª–∏—è—é—Ç –Ω–∞ —á–µ—Ä—Ç—ë–∂ –∏ —Ä–∞—Å—á—ë—Ç—ã. –ó–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.">üí¨</span>
      </legend>

      <label>–ö–æ–ª-–≤–æ —á–∞—Å—Ç–µ–π –∫–∞—Ä–∫–∞—Å–∞, —à—Ç.:</label>
      <select name="frame_parts_count">
        <option value="1" selected>1</option>
        <option value="2">2</option>
        <option value="3">3</option>
      </select>

      <label>–î–ª–∏–Ω–∞ –∫–∞—Ä–∫–∞—Å–∞, –º–º:</label>
      <input type="number" step="any" name="frame_length_mm" value="3000" required>

      <label>–î–∏–∞–º–µ—Ç—Ä –∫–∞—Ä–∫–∞—Å–∞, –º–º:</label>
      <input type="number" step="any" name="frame_diameter_mm" value="110" required>

      <label>–î–∏–∞–º–µ—Ç—Ä –ø—Ä–æ–¥–æ–ª—å–Ω–æ–≥–æ –ø—Ä—É—Ç–∫–∞, –º–º:</label>
      <input type="number" step="any" name="longitudinal_rod_diameter_mm" value="3" required>

      <label>–ö–æ–ª-–≤–æ –ø—Ä—É—Ç–∫–æ–≤, —à—Ç.:</label>
      <select name="rod_count">
        <option value="6" selected>6</option>
        <option value="8">8</option>
        <option value="10">10</option>
        <option value="12">12</option>
        <option value="14">14</option>
        <option value="16">16</option>
        <option value="18">18</option>
        <option value="20">20</option>
        <option value="22">22</option>
        <option value="24">24</option>
      </select>

      <label>–î–∏–∞–º–µ—Ç—Ä –ø—Ä–æ–≤–æ–ª–æ–∫–∏ –∫–æ–ª—å—Ü–∞, –º–º:</label>
      <input type="number" step="any" name="ring_wire_diameter_mm" value="4" required>

      <div class="checkbox-label">
        <input type="checkbox" id="bottom_presence" name="bottom_presence" checked>
        <label for="bottom_presence">–ù–∞–ª–∏—á–∏–µ –¥–æ–Ω—ã—à–∫–∞</label>
      </div>

      <label>–¢–æ–ª—â–∏–Ω–∞ –¥–æ–Ω—ã—à–∫–∞, –º–º:</label>
      <input type="number" step="any" name="bottom_thickness_mm" value="1" required>

      <label>–í—ã—Å–æ—Ç–∞ –¥–æ–Ω—ã—à–∫–∞, –º–º:</label>
      <input type="number" step="any" name="bottom_length_mm" value="18" required>

      <div class="checkbox-label">
        <input type="checkbox" id="venturi_presence" name="venturi_presence">
        <label for="venturi_presence">–ù–∞–ª–∏—á–∏–µ –í–µ–Ω—Ç—É—Ä–∏</label>
      </div>

      <label>–î–∏–∞–º–µ—Ç—Ä –í–µ–Ω—Ç—É—Ä–∏, –º–º:</label>
      <input type="number" step="any" name="venturi_diameter_mm" value="134" required>

      <label>–¢–æ–ª—â–∏–Ω–∞ –í–µ–Ω—Ç—É—Ä–∏, –º–º:</label>
      <input type="number" step="any" name="venturi_thickness_mm" value="1" required>

      <label>–ú–∞—Ç–µ—Ä–∏–∞–ª –ø—Ä–æ–≤–æ–ª–æ–∫–∏:</label>
      <select name="wire_material">
        <option value="09–ì2–°" selected>09–ì2–°</option>
        <option value="–°–≤-08–ê">–°–≤-08–ê</option>
        <option value="12–•18–ù9">12–•18–ù9</option>
        <option value="12–•18–ù10–¢">12–•18–ù10–¢</option>
        <option value="08–•18–ù10">08–•18–ù10</option>
      </select>

      <label>–¢–∏–ø –∑–∞–º–∫–∞:</label>
      <select name="lock_type">
        <option value="–ë–µ–∑ –∑–∞–º–∫–∞" selected>–ë–µ–∑ –∑–∞–º–∫–∞</option>
        <option value="–ö–æ–≥–æ—Ç—å">–ö–æ–≥–æ—Ç—å</option>
      </select>

      <label>–¢–∏–ø –ø–æ–∫—Ä—ã—Ç–∏—è:</label>
      <select name="coating_type">
        <option value="–ë–µ–∑ –æ–∫—Ä–∞—Å–∫–∏" selected>–ë–µ–∑ –æ–∫—Ä–∞—Å–∫–∏</option>
        <option value="–û–∫—Ä–∞—Å–∫–∞">–û–∫—Ä–∞—Å–∫–∞</option>
        <option value="–û—Ü–∏–Ω–∫–æ–≤–∫–∞">–û—Ü–∏–Ω–∫–æ–≤–∫–∞</option>
      </select>

      <label>–¢–∏–ø –æ–≥–æ–ª–æ–≤–∫–∞:</label>
      <select name="head_type">
        <option value="–†–∞—Å—Ç—Ä—É–±" selected>–†–∞—Å—Ç—Ä—É–±</option>
        <option value="–í–æ—Ä–æ—Ç–Ω–∏–∫">–í–æ—Ä–æ—Ç–Ω–∏–∫</option>
      </select>

      <div class="checkbox-label">
        <input type="checkbox" id="neck_ring_inner_diameter_presence" name="neck_ring_inner_diameter_presence">
        <label for="neck_ring_inner_diameter_presence">–í–Ω—É—Ç—Ä. –¥–∏–∞–º–µ—Ç—Ä –∫–æ–ª—å—Ü–∞ —Ä–∞—Å—Ç—Ä—É–±–∞ (–Ω–∞–Ω–æ—Å–∏—Ç—å —Ä–∞–∑–º–µ—Ä)</label>
      </div>
    </fieldset>

    <!-- –°–ü–†–ê–í–û–ß–ù–´–ï –î–ê–ù–ù–´–ï -->
    <fieldset>
      <legend>
        –°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        <span class="info-icon" title="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –º–æ–≥—É—Ç –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –Ω–∞ —á–µ—Ä—Ç–µ–∂–µ.">üí¨</span>
      </legend>

      <div class="inline-group">
        <input type="checkbox" id="neck_length_presence" name="neck_length_presence" checked>
        <label for="neck_length_presence">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–ª–∏–Ω—É –≥–æ—Ä–ª–æ–≤–∏–Ω—ã –Ω–∞ —á–µ—Ä—Ç–µ–∂–µ</label>
      </div>
      <label>–î–ª–∏–Ω–∞ –≥–æ—Ä–ª–æ–≤–∏–Ω—ã, –º–º:</label>
      <input type="number" step="any" name="neck_length" value="220">

      <label>–®–∞–≥ –º–µ–∂–¥—É –∫–æ–ª—å—Ü–∞–º–∏, –º–º:</label>
      <input type="number" step="any" name="distance_between_rings" value="193">

      <div class="inline-group">
        <input type="checkbox" id="last_ring_to_bottom_length_presence" name="last_ring_to_bottom_length_presence">
        <label for="last_ring_to_bottom_length_presence">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–ª—å—Ü–∞ –¥–æ –¥–æ–Ω—ã—à–∫–∞</label>
      </div>
      <label>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∫–æ–ª—å—Ü–∞ –¥–æ –¥–æ–Ω—ã—à–∫–∞, –º–º:</label>
      <input type="number" step="any" name="last_ring_to_bottom_length" value="78">

      <label>–î–∏–∞–º–µ—Ç—Ä –¥–æ–Ω—ã—à–∫–∞, –º–º:</label>
      <input type="number" step="any" name="bottom_diameter" value="106">
    </fieldset>

    <!-- –ò–ú–Ø –§–ê–ô–õ–ê -->
    <fieldset>
      <legend>–ò–º—è —Ñ–∞–π–ª–∞
        <span class="info-icon" title="–ò–º—è —Ñ–∞–π–ª–∞, —Å –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω —á–µ—Ä—Ç—ë–∂. –ë–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è. –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.">üí¨</span> 
      </legend>

      <label>–ò–º—è —Ñ–∞–π–ª–∞ (–±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è):</label>
      <input type="text" name="filename" value="drawing" required>
    </fieldset>

    <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä—Ç—ë–∂</button>
  </form>











<script>
  // –¢–æ–∫–µ–Ω –ø—Ä–∏—Ö–æ–¥–∏—Ç –∏–∑ Flask
  const API_TOKEN = "{{ api_token }}";

  document.getElementById("pdfForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const form = e.target;
    const formData = new FormData(form);

    const filename = form.elements["filename"].value || "drawing";

    try {
      const response = await fetch("/generate", {
        method: "POST",
        headers: {
          "Authorization": "Bearer " + API_TOKEN
        },
        body: formData
      });

      if (!response.ok) {
        let message = `HTTP ${response.status}`;
        try {
          const error = await response.json();
          if (error && error.error) {
            message = error.error;
          }
        } catch (_) {}
        alert("–û—à–∏–±–∫–∞: " + message);
        return;
      }

      const blob = await response.blob();
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);

      const safeName = filename.replace(/[^a-zA-Z–∞-—è–ê-–Ø0-9_\-]/g, "_");
      link.download = `${safeName}.pdf`;
      link.click();
    } catch (err) {
      alert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞: " + err.message);
    }
  });

      // === –î–∏–Ω–∞–º–∏–∫–∞ —Ñ–æ—Ä–º—ã –∫–∞–∫ –≤ GUI ===
    (function initDynamicLogic() {
      // –£—Ç–∏–ª–∏—Ç–∞: –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–æ –∏–º–µ–Ω–∏
      const byName = (name) => document.querySelector(`[name="${name}"]`);

      const frameParts = byName("frame_parts_count");
      const lockType = byName("lock_type");
      const wireMaterial = byName("wire_material");
      const coatingType = byName("coating_type");
      const bottomPresence = byName("bottom_presence");
      const bottomThickness = byName("bottom_thickness_mm");
      const bottomLength = byName("bottom_length_mm");
      const bottomDiameter = byName("bottom_diameter");
      const venturiPresence = byName("venturi_presence");
      const venturiDiameter = byName("venturi_diameter_mm");
      const venturiThickness = byName("venturi_thickness_mm");
      const neckRingPresence = byName("neck_ring_inner_diameter_presence");
      const headType = byName("head_type");
      const neckLengthPresence = byName("neck_length_presence");
      const neckLength = byName("neck_length");
      const lastRingPresence = byName("last_ring_to_bottom_length_presence");
      const lastRing = byName("last_ring_to_bottom_length");

      // –ü–æ–º–æ—â–Ω–∏–∫ –¥–ª—è "–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ disabled", —á—Ç–æ–±—ã –ø–æ–ª—è –≤—Å—ë —Ä–∞–≤–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å
      function setDisabledLike(el, disabled) {
        if (!el) return;
        el.readOnly = disabled && el.tagName === "INPUT";
        if (el.tagName === "SELECT") {
          el.dataset.disabledLike = disabled ? "1" : "0";
        }
        if (disabled) {
          el.classList.add("disabled-like");
        } else {
          el.classList.remove("disabled-like");
        }
      }

      // –ï—Å–ª–∏ —É select —Å—Ç–æ–∏—Ç data-disabled-like=1 ‚Äî –Ω–µ –¥–∞—ë–º –º–µ–Ω—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ
      document.addEventListener("change", (e) => {
        const el = e.target;
        if (el.tagName === "SELECT" && el.dataset.disabledLike === "1") {
          // –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞–∑–∞–¥
          if (el.dataset.prevValue != null) {
            el.value = el.dataset.prevValue;
          }
        } else if (el.tagName === "SELECT") {
          el.dataset.prevValue = el.value;
        }
      });

      // --- 1. –ê–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–º–∫–∞ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —á–∞—Å—Ç–µ–π + —Å—Ç–æ—Ä–æ–∂ ---
      function updateLockTypeByFrameParts() {
        if (!frameParts || !lockType) return;
        const v = frameParts.value;
        const map = {
          "1": "–ë–µ–∑ –∑–∞–º–∫–∞",
          "2": "–ö–æ–≥–æ—Ç—å",
          "3": "–ö–æ–≥–æ—Ç—å"
        };
        const mapped = map[v];
        if (mapped && Array.from(lockType.options).some(o => o.value === mapped)) {
          lockType.value = mapped;
        }
        // –ü—Ä–∏ 1 —á–∞—Å—Ç–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É–µ–º –≤—ã–±–æ—Ä –∑–∞–º–∫–∞
        const disable = (v === "1");
        setDisabledLike(lockType, disable);
      }

      function guardLockType() {
        if (!frameParts || !lockType) return;
        const parts = frameParts.value;
        const lock = lockType.value;
        if ((parts === "2" || parts === "3") && lock === "–ë–µ–∑ –∑–∞–º–∫–∞") {
          alert(
            "–î–ª—è –∫–∞—Ä–∫–∞—Å–∞ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∞—Å—Ç–µ–π –∑–∞–º–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.\n" +
            "–¢–∏–ø –∑–∞–º–∫–∞ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–º–µ–Ω—ë–Ω."
          );
          lockType.value = "–ö–æ–≥–æ—Ç—å";
        }
      }

      // --- 2. –ê–≤—Ç–æ–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª—É + —Å—Ç–æ—Ä–æ–∂ ---
      const stainlessList = ["12–•18–ù9", "12–•18–ù10–¢", "08–•18–ù10"];

      function updateCoatingByMaterial() {
        if (!wireMaterial || !coatingType) return;
        const wm = wireMaterial.value;
        if (stainlessList.includes(wm)) {
          coatingType.value = "–ë–µ–∑ –æ–∫—Ä–∞—Å–∫–∏";
        }
      }

      function guardCoating() {
        if (!wireMaterial || !coatingType) return;
        const wm = wireMaterial.value;
        const coat = coatingType.value;
        if (stainlessList.includes(wm) && (coat === "–û–∫—Ä–∞—Å–∫–∞" || coat === "–û—Ü–∏–Ω–∫–æ–≤–∫–∞")) {
          alert(
            "–î–ª—è –∫–∞—Ä–∫–∞—Å–∞ –∏–∑ –Ω–µ—Ä–∂–∞–≤–µ–π–∫–∏ –ø–æ–∫—Ä—ã—Ç–∏–µ –∏ –æ–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.\n" +
            "–¢–∏–ø –ø–æ–∫—Ä—ã—Ç–∏—è –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–º–µ–Ω—ë–Ω."
          );
          coatingType.value = "–ë–µ–∑ –æ–∫—Ä–∞—Å–∫–∏";
        }
      }

      // --- 3. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ª–∏—á–∏—è –¥–æ–Ω—ã—à–∫–∞ ---
      function updateBottomFields() {
        if (!bottomPresence) return;
        const noBottom = !bottomPresence.checked;
        setDisabledLike(bottomThickness, noBottom);
        setDisabledLike(bottomLength, noBottom);
        setDisabledLike(bottomDiameter, noBottom);
      }

      // --- 4. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ª–∏—á–∏—è –í–µ–Ω—Ç—É—Ä–∏ ---
      function updateVenturiFields() {
        if (!venturiPresence) return;
        const hasVenturi = venturiPresence.checked;
        // –ï—Å–ª–∏ –í–µ–Ω—Ç—É—Ä–∏ –Ω–µ—Ç ‚Äî –≥–∞—Å–∏–º –µ–≥–æ —Ä–∞–∑–º–µ—Ä—ã
        setDisabledLike(venturiDiameter, !hasVenturi);
        setDisabledLike(venturiThickness, !hasVenturi);
        // –ï—Å–ª–∏ –í–µ–Ω—Ç—É—Ä–∏ –µ—Å—Ç—å ‚Äî –≥–∞—Å–∏–º —á–µ–∫–±–æ–∫—Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –¥–∏–∞–º–µ—Ç—Ä–∞ –∫–æ–ª—å—Ü–∞ —Ä–∞—Å—Ç—Ä—É–±–∞
        if (neckRingPresence) {
          setDisabledLike(neckRingPresence, hasVenturi);
          if (hasVenturi) {
            neckRingPresence.checked = false;
          }
        }
      }

      // --- 5. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å neck_ring_inner_diameter_presence –æ—Ç head_type ---
      function updateNeckRingByHeadType() {
        if (!headType || !neckRingPresence) return;
        const type = headType.value;
        const disable = (type !== "–†–∞—Å—Ç—Ä—É–±");
        setDisabledLike(neckRingPresence, disable);
        if (disable) {
          neckRingPresence.checked = false;
        }
      }

      // --- 6. –°–ø—Ä–∞–≤–æ—á–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã: –Ω–∞–ª–∏—á–∏–µ / –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ ---
      function updateNeckLengthField() {
        if (!neckLengthPresence || !neckLength) return;
        const enabled = neckLengthPresence.checked;
        setDisabledLike(neckLength, !enabled);
      }

      function updateLastRingField() {
        if (!lastRingPresence || !lastRing) return;
        const enabled = lastRingPresence.checked;
        setDisabledLike(lastRing, !enabled);
      }

      // --- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è ---
      if (frameParts) {
        frameParts.addEventListener("change", () => {
          updateLockTypeByFrameParts();
          guardLockType();
        });
      }
      if (lockType) {
        lockType.addEventListener("change", guardLockType);
      }

      if (wireMaterial) {
        wireMaterial.addEventListener("change", () => {
          updateCoatingByMaterial();
          guardCoating();
        });
      }
      if (coatingType) {
        coatingType.addEventListener("change", guardCoating);
      }

      if (bottomPresence) {
        bottomPresence.addEventListener("change", updateBottomFields);
      }
      if (venturiPresence) {
        venturiPresence.addEventListener("change", () => {
          updateVenturiFields();
        });
      }
      if (headType) {
        headType.addEventListener("change", () => {
          updateNeckRingByHeadType();
        });
      }
      if (neckLengthPresence) {
        neckLengthPresence.addEventListener("change", updateNeckLengthField);
      }
      if (lastRingPresence) {
        lastRingPresence.addEventListener("change", updateLastRingField);
      }

      // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ---
      updateLockTypeByFrameParts();
      updateCoatingByMaterial();
      guardCoating();
      updateBottomFields();
      updateVenturiFields();
      updateNeckRingByHeadType();
      updateNeckLengthField();
      updateLastRingField();
    })();
</script>



  <!-- –í–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –æ—Ç–ª–∞–¥–∫–∏ (–µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç localhost:5000)
  <script>
    document.getElementById("pdfForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const filename = e.target.elements["filename"].value || "drawing";

      const response = await fetch("http://localhost:5000/generate", {
        method: "POST",
        headers: {
          "Authorization": "Bearer secure_token_Aspex"
        },
        body: formData
      });

      if (response.ok) {
        const blob = await response.blob();
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        const safeName = filename.replace(/[^a-zA-Z–∞-—è–ê-–Ø0-9_\-]/g, "_");
        link.download = `${safeName}.pdf`;
        link.click();
      } else {
        const error = await response.json();
        alert("–û—à–∏–±–∫–∞: " + error.error);
      }
    });
  </script>
  -->

</body>
</html>
